[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Proyecto Final",
    "section": "",
    "text": "Prefacio\nEl presente libro digital tiene como objetivo documentar y explicar de forma detallada el los análisis realizados para el proyecto final del curso de Ciencia de Datos para el Análisis de Cambio Climático. El tema principal del presente documento es Análisis de cambio de probabilidad de “Dry Spells” en la zona centro de Chile bajo cambio climático"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Oliver, Eric C. J., Markus G. Donat, Michael T. Burrows, Pippa J. Moore,\nDan A. Smale, Lisa V. Alexander, Jessica A. Benthuysen, et al. 2018.\n“Longer and More Frequent Marine Heatwaves over the Past\nCentury.” Nature Communications 9 (1). https://doi.org/10.1038/s41467-018-03732-9."
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "2  Introducción",
    "section": "",
    "text": "Introduce la temtica macro que va a ser abarcada por el reporte.\nDefine el problema a tratar.\nHace un review de la literatura (qué sabemos y que no sobre el problema).\nHabla muy brevemente de la metodología usada para abordar el problema.\nOrienta al lector sobre el resto de la publicación."
  },
  {
    "objectID": "requerimientos.html",
    "href": "requerimientos.html",
    "title": "Appendix D — Requerimientos",
    "section": "",
    "text": "El informe consta de las siguientes partes:\na. Abstract (máximo 160 palabras, no cuentan para el máximo de 4000): debe contener la definición e importancia del problema o pregunta de investigación, qué metodología se usó para responder la pregunta, los resultados más importantes y sus implicancias. Todo eso en un máximo de 160 palabras. Algunos ejemplos de abstracts escritos con menos de 160 palabras: https://www.nature.com/articles/s41467-018-03732-9., https://agupubs.onlinelibrary.wiley.com/doi/full/10.1029/2018GL078465\nb. Introducción:\n\nIntroduce la temática macro que va a ser abarcada por el reporte.\nDefine el problema a tratar.\nHace un review de la literatura (qué sabemos y que no sobre el problema).\nHabla muy brevemente de la metodología usada para abordar el problema.\nOrienta al lector sobre el resto de la publicación.\n\nImportante empezar con el review de la literatura desde ya.\nc. Data: Presenta la fuente de datos a ser usados en el estudio y sus principales características. Guiarse por cómo esto es presentado tipícamente en publicaciones.\nd. Métodos: Aquí se presenta el diseño metodológico del estudio. Este diseño es usado para responder la pregunta que definen en la introducción (e.g., ¿Cómo cambiará la variabilidad de El Niñoo de aquí a fin de siglo?). Cualquier salvedad (caveat) sobre la metodología tiene que ser descrita acá también.\ne. Resultados: Esta sección contiene los resultados de los experimentos descrito en el diseño metodológico. Tienen que ayudar a responder la pregunta que se hicieron en la introducción.\nf. Conclusión: Esta sección debe discutir cómo los resultados nos ayudan a responder la pregunta de investigación (que se hicieron en la introducción). También debe discutir las implicancias de los resultados (sociales, económicas, para el campo de investigación, etc)."
  },
  {
    "objectID": "abstract.html",
    "href": "abstract.html",
    "title": "1  Abstract",
    "section": "",
    "text": "a. Abstract (máximo 160 palabras, no cuentan para el máximo de 4000): debe contener la definición e importancia del problema o pregunta de investigación, qué metodología se usó para responder la pregunta, los resultados más importantes y sus implicancias. Todo eso en un máximo de 160 palabras. Algunos ejemplos de abstracts escritos con menos de 160 palabras:"
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "3  Data",
    "section": "",
    "text": "c. Data: Presenta la fuente de datos a ser usados en el estudio y sus principales características. Guiarse por cómo esto es presentado tipícamente en publicaciones."
  },
  {
    "objectID": "metodos.html",
    "href": "metodos.html",
    "title": "4  Métodos",
    "section": "",
    "text": "d. Métodos: Aquí se presenta el diseño metodológico del estudio. Este diseño es usado para responder la pregunta que definen en la introducción (e.g., ¿Cómo cambiará la variabilidad de El Niñoo de aquí a fin de siglo?). Cualquier salvedad (caveat) sobre la metodología tiene que ser descrita acá también."
  },
  {
    "objectID": "resultados.html",
    "href": "resultados.html",
    "title": "5  Resultados",
    "section": "",
    "text": "e. Resultados: Esta sección contiene los resultados de los experimentos descrito en el diseño metodológico. Tienen que ayudar a responder la pregunta que se hicieron en la introducción."
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "6  Conclusión",
    "section": "",
    "text": "f. Conclusión: Esta sección debe discutir cómo los resultados nos ayudan a responder la pregunta de investigación (que se hicieron en la introducción). También debe discutir las implicancias de los resultados (sociales, económicas, para el campo de investigación, etc)."
  },
  {
    "objectID": "data.html#requerimiento",
    "href": "data.html#requerimiento",
    "title": "3  Data",
    "section": "3.1 Requerimiento:",
    "text": "3.1 Requerimiento:\nData: Presenta la fuente de datos a ser usados en el estudio y sus principales características. Guiarse por cómo esto es presentado tipícamente en publicaciones."
  },
  {
    "objectID": "metodos.html#requerimiento",
    "href": "metodos.html#requerimiento",
    "title": "4  Métodos",
    "section": "4.1 Requerimiento:",
    "text": "4.1 Requerimiento:\nMétodos: Aquí se presenta el diseño metodológico del estudio. Este diseño es usado para responder la pregunta que definen en la introducción (e.g., ¿Cómo cambiará la variabilidad de El Niñoo de aquí a fin de siglo?). Cualquier salvedad (caveat) sobre la metodología tiene que ser descrita acá también."
  },
  {
    "objectID": "resultados.html#requerimiento",
    "href": "resultados.html#requerimiento",
    "title": "5  Resultados",
    "section": "5.1 Requerimiento:",
    "text": "5.1 Requerimiento:\nResultados: Esta sección contiene los resultados de los experimentos descrito en el diseño metodológico. Tienen que ayudar a responder la pregunta que se hicieron en la introducción."
  },
  {
    "objectID": "abstract.html#requerimiento",
    "href": "abstract.html#requerimiento",
    "title": "1  Abstract",
    "section": "1.1 Requerimiento:",
    "text": "1.1 Requerimiento:\nAbstract (máximo 160 palabras, no cuentan para el máximo de 4000): debe contener la definición e importancia del problema o pregunta de investigación, qué metodología se usó para responder la pregunta, los resultados más importantes y sus implicancias. Todo eso en un máximo de 160 palabras. Algunos ejemplos de abstracts escritos con menos de 160 palabras:"
  },
  {
    "objectID": "intro.html#requerimiento",
    "href": "intro.html#requerimiento",
    "title": "2  Introducción",
    "section": "2.1 Requerimiento:",
    "text": "2.1 Requerimiento:\n\nIntroduce la temática macro que va a ser abarcada por el reporte.\nDefine el problema a tratar.\nHace un review de la literatura (qué sabemos y que no sobre el problema).\nHabla muy brevemente de la metodología usada para abordar el problema.\nOrienta al lector sobre el resto de la publicación.\n\n\n\n\n\nOliver, Eric C. J., Markus G. Donat, Michael T. Burrows, Pippa J. Moore, Dan A. Smale, Lisa V. Alexander, Jessica A. Benthuysen, et al. 2018. “Longer and More Frequent Marine Heatwaves over the Past Century.” Nature Communications 9 (1). https://doi.org/10.1038/s41467-018-03732-9."
  },
  {
    "objectID": "conceptos.html#dry-spell",
    "href": "conceptos.html#dry-spell",
    "title": "Appendix A — Definición de Conceptos",
    "section": "A.1 Dry Spell",
    "text": "A.1 Dry Spell\nUn período de sequía, también conocido como “dry spell”, es un período prolongado de tiempo en el que se registra una precipitación por debajo del promedio o incluso nula. Estos períodos pueden tener graves consecuencias en la disponibilidad de recursos hídricos, así como en la agricultura y otros sectores económicos que dependen del agua.\nBajo condiciones de cambio climático, se espera que los períodos de sequía se vuelvan más frecuentes e intensos en muchas regiones del mundo, incluyendo la zona central de Chile. Esto se debe a que el cambio climático puede provocar una mayor variabilidad climática y una mayor incidencia de eventos climáticos extremos, como sequías prolongadas. Como resultado, es importante comprender cómo cambiará la probabilidad de ocurrencia de períodos de sequía en la región y cómo esto puede afectar la disponibilidad de recursos hídricos y la sostenibilidad de los sectores económicos dependientes del agua."
  },
  {
    "objectID": "fnc_R.html",
    "href": "fnc_R.html",
    "title": "Appendix B — Funciones en R",
    "section": "",
    "text": "Este capítulo esta destinado a definir y explicar las funciones utilizadas en el proyecto\n\nDuración_Dry_Spell_wave <- function(T, threshold) {\n  I_on <- which(T > threshold)\n  I_off <- which(T <= threshold)\n  \n  sigma <- rep(0, length(T))\n  \n  sigma[I_on] <- 1 # 1 if above threshold\n  sigma[I_off] <- 0\n  \n  I <- diff(sigma)\n  ti_tem <- which(abs(I - 1) < 0.1) + 1\n  tf <- which(abs(I + 1) < 0.1) + 1\n  \n  if (T[1] >= threshold) {\n    ti <- numeric(length(ti_tem) + 1)\n    ti[1] <- 1\n    ti[2:length(ti)] <- ti_tem\n  } else {\n    ti <- ti_tem\n  }\n  \n  if (length(ti) > length(tf)) {\n    ti <- ti[1:(length(ti) - 1)]\n  }\n  \n  duration <- tf - ti\n  mean_dur <- mean(duration)\n  std_dur <- sd(duration)\n  tL <- std_dur ^ 2 / mean_dur\n  \n  return(list(\n    duration = duration,\n    mean_dur = mean_dur,\n    std_dur = std_dur,\n    tL = tL\n  ))\n}"
  },
  {
    "objectID": "fnc_R.html#duration_heat_wave",
    "href": "fnc_R.html#duration_heat_wave",
    "title": "Appendix B — Funciones en R",
    "section": "B.1 Duration_heat_wave",
    "text": "B.1 Duration_heat_wave\nFunción para obtener la duración de las olas de calor\n\ndef Duration_heat_wave(T,threshold):\n\n    I_on=np.argwhere(T>threshold)\n    I_off=np.argwhere(T<=threshold)\n\n    sigma=np.zeros(T.shape)\n\n    sigma[I_on]=1  ###1 if above threshold\n    sigma[I_off]=0\n\n    I=np.diff(sigma)  ###\n    ti_tem=np.squeeze(np.argwhere(np.abs(I-1)<0.1)+1)\n    tf=np.squeeze(np.argwhere(np.abs(I+1)<0.1)+1)\n\n    #ti=np.ndarray()\n\n    if T[0]>=threshold:\n        ti=np.zeros(ti_tem.size+1)\n        ti[0]=1\n        ti[1:]=ti_tem #[1:] gets last number\n    else:\n        ti=np.zeros(ti_tem.size)\n        ti=ti_tem\n\n    if ti.size>tf.size:\n        ti=ti[0:-1]\n\n    duration=tf-ti\n    mean_dur=np.mean(duration)\n    std_dur=np.std(duration)\n    tL=std_dur**2/mean_dur\n   \n    return duration, mean_dur, std_dur, tL"
  },
  {
    "objectID": "fnc_R.html#duration_dry_spell_wave",
    "href": "fnc_R.html#duration_dry_spell_wave",
    "title": "Appendix B — Funciones en R",
    "section": "B.1 Duration_Dry_Spell_wave",
    "text": "B.1 Duration_Dry_Spell_wave\nFunción para obtener la duración de las olas de periodos sin lluvia (Dry Spell)\n\nDuration_Dry_Spell_wave <- function(T, threshold) {\n  I_on <- which(T > threshold)\n  I_off <- which(T <= threshold)\n  \n  sigma <- rep(0, length(T))\n  \n  sigma[I_on] <- 1 # 1 if above threshold\n  sigma[I_off] <- 0\n  \n  I <- diff(sigma)\n  ti_tem <- which(abs(I - 1) < 0.1) + 1\n  tf <- which(abs(I + 1) < 0.1) + 1\n  \n  if (T[1] >= threshold) {\n    ti <- numeric(length(ti_tem) + 1)\n    ti[1] <- 1\n    ti[2:length(ti)] <- ti_tem\n  } else {\n    ti <- ti_tem\n  }\n  \n  if (length(ti) > length(tf)) {\n    ti <- ti[1:(length(ti) - 1)]\n  }\n  \n  duration <- tf - ti\n  mean_dur <- mean(duration)\n  std_dur <- sd(duration)\n  tL <- std_dur ^ 2 / mean_dur\n  \n  return(list(\n    duration = duration,\n    mean_dur = mean_dur,\n    std_dur = std_dur,\n    tL = tL\n  ))\n}"
  },
  {
    "objectID": "fnc_python.html#duration_dry_spell_wave",
    "href": "fnc_python.html#duration_dry_spell_wave",
    "title": "Appendix C — Funciones en Python",
    "section": "C.1 Duration_Dry_Spell_wave",
    "text": "C.1 Duration_Dry_Spell_wave\nFunción para obtener la duración de las olas de periodos sin lluvia (Dry Spell)\n\ndef Duration_Dry_Spell_wave(T,threshold):\n\n    I_on=np.argwhere(T>threshold)\n    I_off=np.argwhere(T<=threshold)\n\n    sigma=np.zeros(T.shape)\n\n    sigma[I_on]=1  ###1 if above threshold\n    sigma[I_off]=0\n\n    I=np.diff(sigma)  ###\n    ti_tem=np.squeeze(np.argwhere(np.abs(I-1)<0.1)+1)\n    tf=np.squeeze(np.argwhere(np.abs(I+1)<0.1)+1)\n\n    #ti=np.ndarray()\n\n    if T[0]>=threshold:\n        ti=np.zeros(ti_tem.size+1)\n        ti[0]=1\n        ti[1:]=ti_tem #[1:] gets last number\n    else:\n        ti=np.zeros(ti_tem.size)\n        ti=ti_tem\n\n    if ti.size>tf.size:\n        ti=ti[0:-1]\n\n    duration=tf-ti\n    mean_dur=np.mean(duration)\n    std_dur=np.std(duration)\n    tL=std_dur**2/mean_dur\n   \n    return duration, mean_dur, std_dur, tL"
  },
  {
    "objectID": "index.html#alumnos",
    "href": "index.html#alumnos",
    "title": "Proyecto Final",
    "section": "Alumnos:",
    "text": "Alumnos:\n\nDenis Berroeta\nJosé Cerda\nVicente"
  },
  {
    "objectID": "index.html#docentes",
    "href": "index.html#docentes",
    "title": "Proyecto Final",
    "section": "Docentes",
    "text": "Docentes\n\nProfesor: Cristian Martinez-Villalobos\nAyudante: Leandra Loyola"
  },
  {
    "objectID": "index.html#componentes",
    "href": "index.html#componentes",
    "title": "Proyecto Final",
    "section": "Componentes:",
    "text": "Componentes:\n\nPresentación: 22 de junio del 2023\nInforme Final: 26 de junio del 2023"
  },
  {
    "objectID": "index.html#repositorio-github",
    "href": "index.html#repositorio-github",
    "title": "Proyecto Final",
    "section": "Repositorio Github",
    "text": "Repositorio Github\nLos análisis y códigos se registraron en el siguiente repositorio Github:\nhttps://github.com/DenisSebastian/cambio_climatico"
  },
  {
    "objectID": "conceptos.html#netcdf",
    "href": "conceptos.html#netcdf",
    "title": "Appendix A — Definición de Conceptos",
    "section": "A.2 NetCDF",
    "text": "A.2 NetCDF\nNetCDF es un formato de archivo comúnmente utilizado para almacenar datos climáticos, ambientales y de bioinformática. Este formato permite que los datos multidimensionales se almacenen en un archivo compacto que se puede descargar fácilmente. Los datos se organizan en matrices y se pueden acceder mediante un índice. Además, los archivos NetCDF son compatibles con una amplia variedad de lenguajes de programación, lo que permite el procesamiento y análisis de datos personalizados. Algunas de las características principales de los archivos NetCDF son:\n\nLos datos se pueden almacenar en diferentes tipos de datos (enteros, flotantes, etc.).\nLos datos se pueden organizar en diferentes dimensiones (tiempo, latitud, longitud, profundidad, etc.).\nLos datos se pueden comprimir para reducir el tamaño del archivo.\nLos datos se pueden acceder y procesar en diferentes plataformas y lenguajes de programación."
  },
  {
    "objectID": "explo.html#selección-de-modelo",
    "href": "explo.html#selección-de-modelo",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.1 Selección de Modelo",
    "text": "A.1 Selección de Modelo\nDescripción inicial\n\nfile_1 <- \"data/historical/pr_SAM-44_MIROC-MIROC5_historical_r1i1p1_SMHI-RCA4_v3_day_19510101-19551231.nc\""
  },
  {
    "objectID": "explo.html#lectura",
    "href": "explo.html#lectura",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.2 Lectura",
    "text": "A.2 Lectura\nLibrerías\n\nlibrary(raster)\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(ggplot2)\n\n\nr_pr_base  <- brick(file_1, varname = \"pr\")\n\n\nr_pr_base_test <- r_pr_base[[1]]\n\n# rastero to df (na omit)\nraster_df  <- raster::as.data.frame(r_pr_base_test, xy = TRUE) %>% na.omit()\nnames(raster_df)[3] <-  \"layer\"\n\nmap_raster_df <- ggplot() +\n  geom_tile(data = raster_df , \n            aes(x = x, y = y, \n                fill = layer)) + \n  scale_fill_viridis_c(name = \"Pr\", option = \"A\", direction = 1)+\n  coord_equal()+\n  ggtitle(paste0(\"Precipitaciones Test\") ) +\n  theme_bw() +\n  theme(panel.grid.major = element_line(colour = \"gray99\"), \n        panel.grid.minor = element_line(colour = \"gray99\"))\n\n\nmap_raster_df\n# ggsave(plot = map_raster_df,filename = \"images/test_pr.png\")"
  },
  {
    "objectID": "explo.html#definición-de-región-de-estudio-roi",
    "href": "explo.html#definición-de-región-de-estudio-roi",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.3 Definición de Región de Estudio (ROI)",
    "text": "A.3 Definición de Región de Estudio (ROI)\n\next <- extent(c(162,  172 ,  -25,  -10 ))\nplot(r_pr_base[[1]])\nplot(ext, add = T)\n\n\n\n\n\nr_pr <- crop(x = r_pr_base, y = ext, snap=\"out\")"
  },
  {
    "objectID": "explo.html#promedio-diario",
    "href": "explo.html#promedio-diario",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.4 Promedio Diario",
    "text": "A.4 Promedio Diario\nA continuación se genera vector con fechas en formato día año\n\ntime_days <- names(r_pr) %>% gsub(\"X\", \"\", .) %>% \n  gsub(\"\\\\.\", \"-\", .) %>% \n  yday()\n\nhead(time_days)\n\n[1] 1 2 3 4 5 6\n\ntail(time_days)\n\n[1] 360 361 362 363 364 365\n\n\n\n\n\ncorrespondien a 1 … 360, 2 … 361, 3 … 362, 4 … 363, 5 … 364, 6 … 365"
  },
  {
    "objectID": "explo.html#promedio-diario-de-la-serie",
    "href": "explo.html#promedio-diario-de-la-serie",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.4 Promedio Diario de la serie",
    "text": "A.4 Promedio Diario de la serie\nA continuación se genera vector con fechas en formato día año\n\ntime_days <- names(r_pr) %>% gsub(\"X\", \"\", .) %>% \n  gsub(\"\\\\.\", \"-\", .) %>% \n  yday()\ntime_days <- time_days[time_days!=366]\n\nhead(time_days)\n\n[1] 1 2 3 4 5 6\n\ntail(time_days)\n\n[1] 360 361 362 363 364 365\n\n\nCalculo de promedios por día anual\n\n# calculate the average\nbeginCluster(4)\nr_pr_mean <- clusterR(r_pr, stackApply, args = list(indices = time_days, fun = mean))\n\nr_pr_max <- clusterR(r_pr, stackApply, args = list(indices = time_days, fun = max))\n\nr_pr_sum <- clusterR(r_pr, stackApply, args = list(indices = time_days, fun = sum))\nendCluster()\n\nr_pr_mean\nnlayers(r_pr_mean)\n\nr_pr_mean <- dropLayer(r_pr_mean, 366)\nr_pr_max <- dropLayer(r_pr_max, 366)\nr_pr_sum <- dropLayer(r_pr_sum, 366)\n\n\n\nclass      : RasterBrick \ndimensions : 35, 24, 840, 365  (nrow, ncol, ncell, nlayers)\nresolution : 0.44, 0.44  (x, y)\nextent     : 161.74, 172.3, -25.3, -9.9  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      :          layer.1,          layer.2,          layer.3,          layer.4,          layer.5,          layer.6,          layer.7,          layer.8,          layer.9,         layer.10,         layer.11,         layer.12,         layer.13,         layer.14,         layer.15, ... \nmin values : 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, 0.00000000000000, ... \nmax values :    0.00016689301,    0.00019640923,    0.00014224052,    0.00020713806,    0.00026211739,    0.00020189285,    0.00029182434,    0.00024762154,    0.00019621849,    0.00022325516,    0.00018463135,    0.00011682510,    0.00015563965,    0.00018925667,    0.00024924278, ... \n\n\n[1] 365"
  },
  {
    "objectID": "explo.html#serie-de-tiempo-raw",
    "href": "explo.html#serie-de-tiempo-raw",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.5 Serie de Tiempo Raw",
    "text": "A.5 Serie de Tiempo Raw\nCáculo de estadísticas generales por día año\n\nval_mean_daily <- cellStats(r_pr_mean, stat = \"mean\")\n\nval_max_daily <- cellStats(r_pr_max, stat = \"max\")\n\nval_sum_daily <- cellStats(r_pr_sum, stat = \"sum\")\n\n\n# Crear setie de tiempo\ndate_v = seq(as_date(\"1951-01-01\"), as_date(\"1951-12-31\"), \"day\")\ndf_mean <- data.frame(date = date_v, pr = val_mean_daily)\ndf_max <- data.frame(date = date_v, pr = val_max_daily)\ndf_sum  <- data.frame(date = date_v, pr = val_sum_daily)\n\n\nMeanMaxSum\n\n\n\nggplot(df_mean, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"mean precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(df_max, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"maximum precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(df_sum, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"sum precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()"
  },
  {
    "objectID": "explo.html#smooth-serie",
    "href": "explo.html#smooth-serie",
    "title": "Appendix A — Análisis Exploratorio",
    "section": "A.6 Smooth Serie",
    "text": "A.6 Smooth Serie\nFunción de suavizado\n\ndaily_smooth <- function(x, span = 0.5) {\n  if (all(is.na(x))) {\n    return(x)\n    \n  } else {\n    df <- data.frame(yd = 1:length(x), ta = x)\n    m <- loess(ta ~ yd, span = span, data = df)\n    est <- predict(m, 1:length(x))\n    \n    return(est)\n  }\n}\n\nAplicar función a al raster\n\nr_mean_smooth <- calc(r_pr_mean, fun = daily_smooth)\nval_mean_daily <- cellStats(r_mean_smooth, stat = \"mean\")\n\n\nr_max_smooth <- calc(r_pr_max, fun = daily_smooth)\nval_max_daily <- cellStats(r_max_smooth, stat = \"max\")\n\n\nr_sum_smooth <- calc(r_pr_sum, fun = daily_smooth)\nval_sum_daily <- cellStats(r_sum_smooth, stat = \"sum\")\n\n\ndate_v = seq(as_date(\"1951-01-01\"), as_date(\"1951-12-31\"), \"day\")\ndf_mean <- data.frame(date = date_v, pr = val_mean_daily)\ndf_max <- data.frame(date = date_v, pr = val_max_daily)\ndf_sum  <- data.frame(date = date_v, pr = val_sum_daily)\n\n\nMeanMaxSum\n\n\n\nggplot(df_mean, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"mean precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(df_max, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"maximum precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(df_sum, \n       aes(date, pr)) + \n  geom_line(color = \"#c6dbef\") + \n  scale_x_date(date_breaks = \"month\", date_labels = \"%b\") +\n  scale_y_continuous() +\n  labs(y = \"sum precipitation\", x = \"\", colour =  \"\") +\n  theme_minimal()"
  }
]